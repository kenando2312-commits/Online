<!DOCTYPE html>
<html>
<head>
  <title>Login Form</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    
    body {
      font-family: 'Poppins', sans-serif;
      background-image: url('https://drive.google.com/thumbnail?id=1ANoX14MrOaQOynCV9xxPJ1y-RN1XtTpM&sz=w4000');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      background-repeat: no-repeat; 
      margin: 0;
      padding: 0;
      height: 100vh;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.8s ease;
    }
    
    body::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.25);
      z-index: -1;
    }
    
    .login-box {
      width: 450px;
      padding: 50px;
      border-radius: 25px;
      background-color: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
      box-sizing: border-box;
      text-align: center;
      border: 1px solid rgba(255, 255, 255, 0.1);
      animation: fadeIn 1.2s ease-out;
      margin-left: 80px;
      transition: all 0.8s ease;
    }
    
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .welcome-box {
      width: 50%;
      padding: 0 80px;
      color: white;
      text-align: center;
      animation: fadeIn 1.2s ease-out;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      transition: all 0.8s ease;
    }
    
    .welcome-box h1 {
      font-size: 65px;
      font-weight: 700;
      margin: 0;
      margin-bottom: 5px;
      letter-spacing: 2px;
    }
    
    .welcome-box .brand {
      font-size: 70px;
      font-weight: 800;
      margin: 0;
      margin-bottom: 10px;
      color: white;
      letter-spacing: 1px;
    }
    
    .welcome-box p {
      font-size: 18px;
      margin: 0;
      opacity: 0.9;
    }
    
    .input-group {
      margin-bottom: 28px;
      text-align: left;
      position: relative;
    }
    
    .inputtext {
      width: 100%;
      padding: 18px 18px 18px 55px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 15px;
      background-color: rgba(255, 255, 255, 0.1);
      font-size: 16px;
      color: #fff;
      box-sizing: border-box;
      transition: all 0.3s ease;
    }
    
    .inputtext::placeholder {
      color: rgba(255, 255, 255, 0.7);
    }
    
    .inputtext:focus {
      background-color: rgba(255, 255, 255, 0.15);
      border-color: rgba(255, 255, 255, 0.4);
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.15);
      outline: none;
    }
    
    .input-icon {
      position: absolute;
      left: 20px;
      top: 50%;
      transform: translateY(-50%);
      color: rgba(255, 255, 255, 0.85);
      font-size: 18px;
    }
    
    .password-toggle {
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      cursor: pointer;
      color: rgba(255, 255, 255, 0.85);
      font-size: 18px;
    }
    
    .tombol {
      width: 100%;
      padding: 18px;
      border: none;
      border-radius: 15px;
      background: linear-gradient(135deg, #020ff5, #4a69ff);
      color: #fff;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      transition: all 0.4s ease;
      margin-top: 15px;
      box-shadow: 0 10px 25px rgba(2, 15, 245, 0.35);
    }
    
    .tombol:hover {
      background: linear-gradient(135deg, #020cd8, #3a5ae6);
      transform: translateY(-3px);
      box-shadow: 0 15px 30px rgba(2, 15, 245, 0.5);
    }
    
    .logo-container {
      margin-bottom: 40px;
    }
    
    .logo {
      width: 180px;
      height: 180px;
      object-fit: contain;
      transition: all 0.5s ease;
      filter: drop-shadow(0 8px 20px rgba(0, 0, 0, 0.5));
    }
    
    .logo:hover {
      transform: scale(1.05);
      filter: drop-shadow(0 12px 25px rgba(0, 0, 0, 0.6));
    }
    
    .forgot-password {
      text-align: right;
      margin-top: 15px;
      font-size: 14px;
    }
    
    .forgot-password a {
      color: rgba(255, 255, 255, 0.85);
      text-decoration: none;
      transition: all 0.3s ease;
    }
    
    .forgot-password a:hover {
      color: #fff;
      text-decoration: underline;
      text-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
    }
    
    /* Loading overlay */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      opacity: 0;
      visibility: hidden;
      transition: all 0.5s ease;
    }
    
    .loading-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    
    .loading-spinner {
      width: 60px;
      height: 60px;
      border: 5px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: #4a69ff;
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .loading-text {
      color: white;
      font-size: 18px;
      margin-top: 20px;
      font-weight: 500;
    }
    
    /* Notifikasi error */
    .notification {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(255, 77, 77, 0.9);
      color: white;
      padding: 15px 25px;
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      z-index: 1000;
      font-family: 'Poppins', sans-serif;
      font-size: 16px;
      font-weight: 500;
      backdrop-filter: blur(10px);
      opacity: 0;
      transition: opacity 0.5s ease;
    }
    
    .notification.show {
      opacity: 1;
    }
    
    /* Session timer */
    .session-timer {
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 10px 15px;
      border-radius: 8px;
      font-family: 'Poppins', sans-serif;
      font-size: 14px;
      z-index: 1000;
      display: none;
    }
    
    .session-timer.active {
      display: block;
    }
    
    .timer-icon {
      margin-right: 8px;
      color: #4CAF50;
    }
    
    /* Auto logout notification */
    .auto-logout-notification {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(255, 152, 0, 0.9);
      color: white;
      padding: 15px 25px;
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      z-index: 1000;
      font-family: 'Poppins', sans-serif;
      font-size: 16px;
      font-weight: 500;
      backdrop-filter: blur(10px);
      opacity: 0;
      transition: opacity 0.5s ease;
      display: flex;
      align-items: center;
    }
    
    .auto-logout-notification.show {
      opacity: 1;
    }
    
    .auto-logout-icon {
      margin-right: 10px;
      font-size: 20px;
    }
    
    .extend-session-btn {
      margin-left: 15px;
      padding: 5px 10px;
      background-color: white;
      color: #ff9800;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .extend-session-btn:hover {
      background-color: #f5f5f5;
    }
    
    /* Logout button */
    .logout-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
      display: none;
    }
    
    .logout-container.active {
      display: block;
    }
    
    .logout-btn {
      background-color: rgba(255, 77, 77, 0.9);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 30px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    
    .logout-btn:hover {
      background-color: rgba(255, 77, 77, 1);
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }
    
    .logout-icon {
      margin-right: 8px;
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
  <!-- Form Login di Kiri -->
  <div class="login-box">
    <div class="logo-container">
      <img src="https://drive.google.com/thumbnail?id=1GeOfHRRIuwi3D88ANoibB45UXWY-c4A4&sz=w1000" alt="JAFABIO Logo" class="logo">
    </div>
    <form id="loginForm">
      <div class="input-group">
        <i class="fas fa-user input-icon"></i>
        <input type="text" name="username" placeholder="Username" class="inputtext" required>
      </div>
      <div class="input-group">
        <i class="fas fa-lock input-icon"></i>
        <input type="password" name="password" placeholder="Password" class="inputtext" id="password-field" required>
        <i class="fas fa-eye password-toggle" id="toggle-password" onclick="togglePassword()"></i>
      </div>
      <div class="forgot-password">
        <a href="#">Lupa Password?</a>
      </div>
      <input type="button" value="Login" class="tombol" onclick="login()">
    </form>
  </div>
  
  <!-- Teks Welcome di Kanan -->
  <div class="welcome-box">
    <h1>WELCOME</h1>
    <div class="brand">JafaBio</div>
    <p>Aplikasi Biodata Available</p>
  </div>
  
  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loading-overlay">
    <div>
      <div class="loading-spinner"></div>
      <div class="loading-text">Memproses login...</div>
    </div>
  </div>
  
  <!-- Notification Container -->
  <div id="notification" class="notification"></div>
  
  <!-- Auto Logout Notification -->
  <div id="auto-logout-notification" class="auto-logout-notification">
    <i class="fas fa-clock auto-logout-icon"></i>
    <span>Sesi Anda akan berakhir dalam <span id="countdown">5:00</span> menit</span>
    <button class="extend-session-btn" onclick="extendSession()">Perpanjang</button>
  </div>
  
  <!-- Session Timer -->
  <div id="session-timer" class="session-timer">
    <i class="fas fa-clock timer-icon"></i>
    <span>Sisa waktu: <span id="time-remaining">3:00:00</span></span>
  </div>
  
  <!-- Logout Button -->
  <div id="logout-container" class="logout-container">
    <button class="logout-btn" onclick="logout()">
      <i class="fas fa-sign-out-alt logout-icon"></i> Logout
    </button>
  </div>
  
  <script>
    // Konstanta untuk session management
    const SESSION_DURATION = 3 * 60 * 60 * 1000; // 3 jam dalam milidetik
    const WARNING_DURATION = 5 * 60 * 1000; // 5 menit peringatan sebelum logout
    const SESSION_KEY = 'jafabio_session';
    const USERNAME_KEY = 'jafabio_username';
    
    // Variabel global untuk timer
    let sessionTimer;
    let warningTimer;
    let countdownTimer;
    let isLoggedIn = false;
    
    // Cek session saat halaman dimuat
    window.onload = function() {
      checkSession();
    };
    
    function togglePassword() {
      var passwordField = document.getElementById("password-field");
      var toggleIcon = document.getElementById("toggle-password");
      
      if (passwordField.type === "password") {
        passwordField.type = "text";
        toggleIcon.classList.remove("fa-eye");
        toggleIcon.classList.add("fa-eye-slash");
      } else {
        passwordField.type = "password";
        toggleIcon.classList.remove("fa-eye-slash");
        toggleIcon.classList.add("fa-eye");
      }
    }
    
    function showNotification(message, duration = 3000) {
      var notification = document.getElementById("notification");
      notification.textContent = message;
      notification.classList.add("show");
      
      setTimeout(function() {
        notification.classList.remove("show");
      }, duration);
    }
    
    function login() {
      var username = document.getElementsByName("username")[0].value;
      var password = document.getElementsByName("password")[0].value;
      
      // Validasi input
      if (!username || !password) {
        showNotification("Username dan password harus diisi!");
        return;
      }
      
      var users = {
        "MLY1": "123",
        "TAZIA": "1234",
        "ANNEYO": "1234",
        "NG_B": "1234",
        "KIARICH": "1234",
        "SKY": "1234",
        "SRI_AYU": "1234",
        "KIM_HR": "1234",
        "ARENA": "1234",
        "AMAN_MAJU": "1234",
        "WYNN": "1234",
      };
      
      if (users[username] === password) {
        // Tampilkan loading overlay
        document.getElementById("loading-overlay").classList.add("active");
        
        // Simulasikan proses loading
        setTimeout(function() {
          // Sembunyikan loading overlay
          document.getElementById("loading-overlay").classList.remove("active");
          
          // Set status login
          isLoggedIn = true;
          
          // Simpan session
          try {
            createSession(username);
          } catch (e) {
            console.error("Gagal menyimpan session:", e);
          }
          
          // Buka halaman JafaBio di tab yang sama
          openJafaBio();
        }, 1500);
      } else {
        showNotification("Username atau password salah!");
      }
    }
    
    function createSession(username) {
      // Simpan waktu login dan username di localStorage
      const loginTime = new Date().getTime();
      localStorage.setItem(SESSION_KEY, loginTime);
      localStorage.setItem(USERNAME_KEY, username);
      
      // Mulai timer session
      startSessionTimer();
      
      // Tampilkan tombol logout
      document.getElementById("logout-container").classList.add("active");
    }
    
    function checkSession() {
      try {
        const loginTime = localStorage.getItem(SESSION_KEY);
        const username = localStorage.getItem(USERNAME_KEY);
        
        if (loginTime && username) {
          const currentTime = new Date().getTime();
          const elapsedTime = currentTime - parseInt(loginTime);
          
          if (elapsedTime < SESSION_DURATION) {
            // Session masih valid
            const remainingTime = SESSION_DURATION - elapsedTime;
            
            // Set status login
            isLoggedIn = true;
            
            // Tampilkan tombol logout
            document.getElementById("logout-container").classList.add("active");
            
            // Mulai timer dengan sisa waktu
            startSessionTimer(remainingTime);
          } else {
            // Session sudah kadaluarsa
            logout();
          }
        }
      } catch (e) {
        console.error("Gagal memeriksa session:", e);
      }
    }
    
    function startSessionTimer(remainingTime = SESSION_DURATION) {
      // Hapus timer yang ada
      clearInterval(sessionTimer);
      clearTimeout(warningTimer);
      clearInterval(countdownTimer);
      
      // Tampilkan timer session
      document.getElementById("session-timer").classList.add("active");
      
      // Update timer setiap detik
      sessionTimer = setInterval(function() {
        remainingTime -= 1000;
        
        if (remainingTime <= 0) {
          // Session habis
          clearInterval(sessionTimer);
          logout();
          return;
        }
        
        // Format waktu menjadi HH:MM:SS
        const hours = Math.floor(remainingTime / (60 * 60 * 1000));
        const minutes = Math.floor((remainingTime % (60 * 60 * 1000)) / (60 * 1000));
        const seconds = Math.floor((remainingTime % (60 * 1000)) / 1000);
        
        const formattedTime = 
          (hours < 10 ? '0' + hours : hours) + ':' + 
          (minutes < 10 ? '0' + minutes : minutes) + ':' + 
          (seconds < 10 ? '0' + seconds : seconds);
        
        document.getElementById('time-remaining').textContent = formattedTime;
      }, 1000);
      
      // Set timer untuk peringatan 5 menit sebelum session habis
      warningTimer = setTimeout(function() {
        showAutoLogoutWarning();
      }, remainingTime - WARNING_DURATION);
    }
    
    function showAutoLogoutWarning() {
      const notification = document.getElementById('auto-logout-notification');
      notification.classList.add('show');
      
      let countdownTime = WARNING_DURATION;
      
      // Update countdown setiap detik
      countdownTimer = setInterval(function() {
        countdownTime -= 1000;
        
        if (countdownTime <= 0) {
          clearInterval(countdownTimer);
          return;
        }
        
        // Format waktu menjadi MM:SS
        const minutes = Math.floor(countdownTime / (60 * 1000));
        const seconds = Math.floor((countdownTime % (60 * 1000)) / 1000);
        
        const formattedTime = 
          (minutes < 10 ? '0' + minutes : minutes) + ':' + 
          (seconds < 10 ? '0' + seconds : seconds);
        
        document.getElementById('countdown').textContent = formattedTime;
      }, 1000);
    }
    
    function extendSession() {
      // Sembunyikan notifikasi
      document.getElementById('auto-logout-notification').classList.remove('show');
      
      // Hentikan countdown
      clearInterval(countdownTimer);
      
      // Perpanjang session
      try {
        const newLoginTime = new Date().getTime();
        localStorage.setItem(SESSION_KEY, newLoginTime);
        
        // Mulai ulang timer
        startSessionTimer();
        
        showNotification("Session diperpanjang 3 jam lagi", 3000);
      } catch (e) {
        console.error("Gagal memperpanjang session:", e);
        showNotification("Gagal memperpanjang session", 3000);
      }
    }
    
    function logout() {
      // Set status login
      isLoggedIn = false;
      
      // Hapus session dari localStorage
      try {
        localStorage.removeItem(SESSION_KEY);
        localStorage.removeItem(USERNAME_KEY);
      } catch (e) {
        console.error("Gagal menghapus session:", e);
      }
      
      // Hentikan semua timer
      clearInterval(sessionTimer);
      clearTimeout(warningTimer);
      clearInterval(countdownTimer);
      
      // Sembunyikan timer session
      document.getElementById("session-timer").classList.remove("active");
      
      // Sembunyikan notifikasi auto logout
      document.getElementById("auto-logout-notification").classList.remove("show");
      
      // Sembunyikan tombol logout
      document.getElementById("logout-container").classList.remove("active");
      
      // Reset form
      document.getElementById("loginForm").reset();
      
      showNotification("Anda telah logout", 2000);
    }
    
    // FUNGSI YANG TELAH DIUBAH
    function openJafaBio() {
      var url = "https://sites.google.com/view/jafabiomalaysia/jafabio";
      
      // Alihkan halaman saat ini ke URL JafaBio
      window.location.href = url;
    }
    
    // Tambahkan event listener untuk form submission
    document.getElementById("loginForm").addEventListener("submit", function(e) {
      e.preventDefault();
      login();
    });
    
    // Tambahkan event listener untuk enter key pada input fields
    document.querySelectorAll(".inputtext").forEach(function(input) {
      input.addEventListener("keypress", function(e) {
        if (e.key === "Enter") {
          login();
        }
      });
    });
  </script>
</body>
</html>
